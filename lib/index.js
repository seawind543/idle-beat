/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["idle-beat"]=e():t.IdleBeat=e()}(self,(()=>(()=>{var t={405:function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(o)?o:String(o)),r)}var o}var o,a,s,u,f,c,l,v,d,h,p,m,y,b,w,g,j=this&&this.__classPrivateFieldSet||function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},T=this&&this.__classPrivateFieldGet||function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},x=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var O=x(i(279)),E=i(754),_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.add(this),s.set(this,void 0),u.set(this,void 0),f.set(this,void 0),c.set(this,void 0),l.set(this,void 0),v.set(this,void 0),p.set(this,void 0),j(this,u,Object.assign(Object.assign({},E.DEFAULT_CONFIG),e),"f"),j(this,s,T(t,a,"m",d).call(t),"f"),j(this,f,{},"f"),j(this,c,-1,"f"),j(this,l,new Set,"f"),j(this,v,new Set,"f"),j(this,p,(0,O.default)(T(this,o,"m",h).bind(this),T(this,u,"f").debounce,{leading:!0}),"f"),this.restart()}var e,i;return e=t,(i=[{key:"restart",value:function(){var e=this;j(this,s,T(t,a,"m",d).call(t),"f"),T(this,o,"m",g).call(this),T(this,u,"f").events.forEach((function(t){document.removeEventListener(t,T(e,p,"f"),!0),document.addEventListener(t,T(e,p,"f"),!0)}))}},{key:"onIdle",value:function(t,e){var i,n="".concat(t);if(T(this,f,"f")[n]=null!==(i=T(this,f,"f")[n])&&void 0!==i?i:new Map,!T(this,f,"f")[n].has(e)){var r=T(this,o,"m",w).call(this,t);T(this,f,"f")[n].set(e,{timeoutId:T(this,o,"m",y).call(this,e,r,t)})}}},{key:"offIdle",value:function(t,e){var i,n,r,o=null===(i=T(this,f,"f")[t])||void 0===i?void 0:i.get(e);o&&(clearTimeout(null==o?void 0:o.timeoutId),null===(n=T(this,f,"f")[t])||void 0===n||n.delete(e)),0===(null===(r=T(this,f,"f")[t])||void 0===r?void 0:r.size)&&delete T(this,f,"f")[t]}},{key:"onBeat",value:function(t){T(this,l,"f").has(t)||T(this,l,"f").add(t)}},{key:"offBeat",value:function(t){T(this,l,"f").delete(t)}},{key:"onActive",value:function(t){T(this,v,"f").has(t)||T(this,v,"f").add(t)}},{key:"offActive",value:function(t){T(this,v,"f").delete(t)}},{key:"state",get:function(){return Object.assign({},T(this,s,"f"))}},{key:"idleTime",get:function(){return+new Date-T(this,s,"f").lastActive}}])&&r(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();a=_,s=new WeakMap,u=new WeakMap,f=new WeakMap,c=new WeakMap,l=new WeakMap,v=new WeakMap,p=new WeakMap,o=new WeakSet,d=function(){return{lastActive:+new Date,lastEvent:null}},h=function(t){j(this,s,{lastActive:+new Date,lastEvent:t},"f"),T(this,o,"m",g).call(this),T(this,v,"f").forEach((function(e){return e(t)}))},m=function(t,e){t(this.idleTime,e)},y=function(t,e,i){var n=this;return window.setTimeout((function(){return T(n,o,"m",m).call(n,t,i)}),e)},b=function(t){var e=this;T(this,l,"f").forEach((function(i){t===T(e,s,"f").lastActive&&i(e.idleTime)}))},w=function(t){return 1e3*t-this.idleTime},g=function(){var t=this;Object.keys(T(this,f,"f")).forEach((function(e){var i=T(t,f,"f")[e],n=+e;i.forEach((function(e,r){clearTimeout(e.timeoutId);var a=T(t,o,"m",w).call(t,n);i.set(r,{timeoutId:T(t,o,"m",y).call(t,r,a,n)})}))})),clearInterval(T(this,c,"f")),j(this,c,window.setInterval((function(){return T(t,o,"m",b).call(t,T(t,s,"f").lastActive)}),1e3*T(this,u,"f").beat),"f")},e.default=_},754:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=void 0,e.DEFAULT_CONFIG={events:["mousedown","mousemove","mouseup","scroll","touchstart","touchmove","touchend","keydown","keypress","change","orientationchange","resize","visibilitychange"],beat:5,debounce:500}},820:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=void 0;var r=n(i(405)),o=i(754);Object.defineProperty(e,"DEFAULT_CONFIG",{enumerable:!0,get:function(){return o.DEFAULT_CONFIG}}),e.default=r.default},705:(t,e,i)=>{var n=i(639).Symbol;t.exports=n},239:(t,e,i)=>{var n=i(705),r=i(607),o=i(333),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):o(t)}},561:(t,e,i)=>{var n=i(990),r=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(r,""):t}},957:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},607:(t,e,i)=>{var n=i(705),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),i=t[s];try{t[s]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[s]=i:delete t[s]),r}},333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},639:(t,e,i)=>{var n=i(957),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o},990:t=>{var e=/\s/;t.exports=function(t){for(var i=t.length;i--&&e.test(t.charAt(i)););return i}},279:(t,e,i)=>{var n=i(218),r=i(771),o=i(841),a=Math.max,s=Math.min;t.exports=function(t,e,i){var u,f,c,l,v,d,h=0,p=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var i=u,n=f;return u=f=void 0,h=e,l=t.apply(n,i)}function w(t){var i=t-d;return void 0===d||i>=e||i<0||m&&t-h>=c}function g(){var t=r();if(w(t))return j(t);v=setTimeout(g,function(t){var i=e-(t-d);return m?s(i,c-(t-h)):i}(t))}function j(t){return v=void 0,y&&u?b(t):(u=f=void 0,l)}function T(){var t=r(),i=w(t);if(u=arguments,f=this,d=t,i){if(void 0===v)return function(t){return h=t,v=setTimeout(g,e),p?b(t):l}(d);if(m)return clearTimeout(v),v=setTimeout(g,e),b(d)}return void 0===v&&(v=setTimeout(g,e)),l}return e=o(e)||0,n(i)&&(p=!!i.leading,c=(m="maxWait"in i)?a(o(i.maxWait)||0,e):c,y="trailing"in i?!!i.trailing:y),T.cancel=function(){void 0!==v&&clearTimeout(v),h=0,u=d=f=v=void 0},T.flush=function(){return void 0===v?l:j(r())},T}},218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},448:(t,e,i)=>{var n=i(239),r=i(5);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==n(t)}},771:(t,e,i)=>{var n=i(639);t.exports=function(){return n.Date.now()}},841:(t,e,i)=>{var n=i(561),r=i(218),o=i(448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var i=s.test(t);return i||u.test(t)?f(t.slice(2),i?2:8):a.test(t)?NaN:+t}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}return i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i(820)})()));
//# sourceMappingURL=index.js.map