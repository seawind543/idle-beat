/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["idle-beat"]=e():t.IdleBeat=e()}(self,(()=>(()=>{var t={405:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var o,a,u,s,f,c,l,v,d,h,p,m,y,b,w,g=this&&this.__classPrivateFieldSet||function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},j=this&&this.__classPrivateFieldGet||function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},T=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var x=T(n(279)),O=n(754),_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.add(this),u.set(this,void 0),s.set(this,void 0),f.set(this,void 0),c.set(this,void 0),l.set(this,void 0),h.set(this,void 0),g(this,s,Object.assign(Object.assign({},O.DEFAULT_CONFIG),e),"f"),g(this,u,j(t,a,"m",v).call(t),"f"),g(this,f,{},"f"),g(this,c,-1,"f"),g(this,l,new Set,"f"),g(this,h,(0,x.default)(j(this,o,"m",d).bind(this),j(this,s,"f").debounce,{leading:!0}),"f"),this.restart()}var e,n;return e=t,(n=[{key:"restart",value:function(){var e=this;g(this,u,j(t,a,"m",v).call(t),"f"),j(this,o,"m",w).call(this),j(this,s,"f").events.forEach((function(t){document.removeEventListener(t,j(e,h,"f"),!0),document.addEventListener(t,j(e,h,"f"),!0)}))}},{key:"onIdle",value:function(t,e){var n,i="".concat(t);if(j(this,f,"f")[i]=null!==(n=j(this,f,"f")[i])&&void 0!==n?n:new Map,!j(this,f,"f")[i].has(e)){var r=j(this,o,"m",b).call(this,t);j(this,f,"f")[i].set(e,{timeoutId:j(this,o,"m",m).call(this,e,r,t)})}}},{key:"offIdle",value:function(t,e){var n,i,r,o=null===(n=j(this,f,"f")[t])||void 0===n?void 0:n.get(e);o&&(clearTimeout(null==o?void 0:o.timeoutId),null===(i=j(this,f,"f")[t])||void 0===i||i.delete(e)),0===(null===(r=j(this,f,"f")[t])||void 0===r?void 0:r.size)&&delete j(this,f,"f")[t]}},{key:"onBeat",value:function(t){j(this,l,"f").has(t)||j(this,l,"f").add(t)}},{key:"offBeat",value:function(t){j(this,l,"f").delete(t)}},{key:"state",get:function(){return Object.assign({},j(this,u,"f"))}},{key:"idleTime",get:function(){return+new Date-j(this,u,"f").lastActive}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();a=_,u=new WeakMap,s=new WeakMap,f=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,o=new WeakSet,v=function(){return{lastActive:+new Date,lastEvent:null}},d=function(t){g(this,u,{lastActive:+new Date,lastEvent:t},"f"),j(this,o,"m",w).call(this)},p=function(t,e){t(this.idleTime,e)},m=function(t,e,n){var i=this;return window.setTimeout((function(){return j(i,o,"m",p).call(i,t,n)}),e)},y=function(t){var e=this;j(this,l,"f").forEach((function(n){t===j(e,u,"f").lastActive&&n(e.idleTime)}))},b=function(t){return 1e3*t-this.idleTime},w=function(){var t=this;Object.keys(j(this,f,"f")).forEach((function(e){var n=j(t,f,"f")[e],i=+e;n.forEach((function(e,r){clearTimeout(e.timeoutId);var a=j(t,o,"m",b).call(t,i);n.set(r,{timeoutId:j(t,o,"m",m).call(t,r,a,i)})}))})),clearInterval(j(this,c,"f")),g(this,c,window.setInterval((function(){return j(t,o,"m",y).call(t,j(t,u,"f").lastActive)}),1e3*j(this,s,"f").beat),"f")},e.default=_},754:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=void 0,e.DEFAULT_CONFIG={events:["mousedown","mousemove","mouseup","scroll","touchstart","touchmove","touchend","keydown","keypress","change","orientationchange","resize","visibilitychange"],beat:5,debounce:500}},820:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=void 0;var r=i(n(405)),o=n(754);Object.defineProperty(e,"DEFAULT_CONFIG",{enumerable:!0,get:function(){return o.DEFAULT_CONFIG}}),e.default=r.default},705:(t,e,n)=>{var i=n(639).Symbol;t.exports=i},239:(t,e,n)=>{var i=n(705),r=n(607),o=n(333),a=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):o(t)}},561:(t,e,n)=>{var i=n(990),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},957:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},607:(t,e,n)=>{var i=n(705),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,u=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,u),n=t[u];try{t[u]=void 0;var i=!0}catch(t){}var r=a.call(t);return i&&(e?t[u]=n:delete t[u]),r}},333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},639:(t,e,n)=>{var i=n(957),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},279:(t,e,n)=>{var i=n(218),r=n(771),o=n(841),a=Math.max,u=Math.min;t.exports=function(t,e,n){var s,f,c,l,v,d,h=0,p=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=s,i=f;return s=f=void 0,h=e,l=t.apply(i,n)}function w(t){var n=t-d;return void 0===d||n>=e||n<0||m&&t-h>=c}function g(){var t=r();if(w(t))return j(t);v=setTimeout(g,function(t){var n=e-(t-d);return m?u(n,c-(t-h)):n}(t))}function j(t){return v=void 0,y&&s?b(t):(s=f=void 0,l)}function T(){var t=r(),n=w(t);if(s=arguments,f=this,d=t,n){if(void 0===v)return function(t){return h=t,v=setTimeout(g,e),p?b(t):l}(d);if(m)return clearTimeout(v),v=setTimeout(g,e),b(d)}return void 0===v&&(v=setTimeout(g,e)),l}return e=o(e)||0,i(n)&&(p=!!n.leading,c=(m="maxWait"in n)?a(o(n.maxWait)||0,e):c,y="trailing"in n?!!n.trailing:y),T.cancel=function(){void 0!==v&&clearTimeout(v),h=0,s=d=f=v=void 0},T.flush=function(){return void 0===v?l:j(r())},T}},218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},448:(t,e,n)=>{var i=n(239),r=n(5);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},771:(t,e,n)=>{var i=n(639);t.exports=function(){return i.Date.now()}},841:(t,e,n)=>{var i=n(561),r=n(218),o=n(448),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=u.test(t);return n||s.test(t)?f(t.slice(2),n?2:8):a.test(t)?NaN:+t}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(820)})()));
//# sourceMappingURL=index.js.map