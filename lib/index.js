/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["idle-beat"]=e():t.IdleBeat=e()}(this,()=>(()=>{var t={95:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function o(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var a,u,s,f,c,l,v,d,h,p,m,y,b,w,g,j=this&&this.__classPrivateFieldSet||function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},T=this&&this.__classPrivateFieldGet||function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},x=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var O=x(n(221)),_=n(224),E=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a.add(this),s.set(this,void 0),f.set(this,void 0),c.set(this,void 0),l.set(this,void 0),v.set(this,void 0),p.set(this,void 0),j(this,f,Object.assign(Object.assign({},_.DEFAULT_CONFIG),e),"f"),j(this,s,T(u,u,"m",d).call(u),"f"),j(this,c,{},"f"),j(this,l,-1,"f"),j(this,v,new Set,"f"),j(this,p,(0,O.default)(T(this,a,"m",h).bind(this),T(this,f,"f").debounce,{leading:!0}),"f"),this.restart()},(e=[{key:"restart",value:function(){var t=this;j(this,s,T(u,u,"m",d).call(u),"f"),T(this,a,"m",g).call(this),T(this,f,"f").events.forEach(function(e){document.removeEventListener(e,T(t,p,"f"),!0),document.addEventListener(e,T(t,p,"f"),!0)})}},{key:"onIdle",value:function(t,e){var n,i="".concat(t);if(T(this,c,"f")[i]=null!==(n=T(this,c,"f")[i])&&void 0!==n?n:new Map,!T(this,c,"f")[i].has(e)){var r=T(this,a,"m",w).call(this,t);T(this,c,"f")[i].set(e,{timeoutId:T(this,a,"m",y).call(this,e,r,t)})}}},{key:"offIdle",value:function(t,e){var n,i,r,o=null===(n=T(this,c,"f")[t])||void 0===n?void 0:n.get(e);o&&(clearTimeout(null==o?void 0:o.timeoutId),null===(i=T(this,c,"f")[t])||void 0===i||i.delete(e)),0===(null===(r=T(this,c,"f")[t])||void 0===r?void 0:r.size)&&delete T(this,c,"f")[t]}},{key:"onBeat",value:function(t){T(this,v,"f").has(t)||T(this,v,"f").add(t)}},{key:"offBeat",value:function(t){T(this,v,"f").delete(t)}},{key:"state",get:function(){return Object.assign({},T(this,s,"f"))}},{key:"idleTime",get:function(){return+new Date-T(this,s,"f").lastActive}}])&&r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();u=E,s=new WeakMap,f=new WeakMap,c=new WeakMap,l=new WeakMap,v=new WeakMap,p=new WeakMap,a=new WeakSet,d=function(){return{lastActive:+new Date,lastEvent:null}},h=function(t){j(this,s,{lastActive:+new Date,lastEvent:t},"f"),T(this,a,"m",g).call(this)},m=function(t,e){t(this.idleTime,e)},y=function(t,e,n){var i=this;return window.setTimeout(function(){return T(i,a,"m",m).call(i,t,n)},e)},b=function(t){var e=this;T(this,v,"f").forEach(function(n){t===T(e,s,"f").lastActive&&n(e.idleTime)})},w=function(t){return 1e3*t-this.idleTime},g=function(){var t=this;Object.keys(T(this,c,"f")).forEach(function(e){var n=T(t,c,"f")[e],i=+e;n.forEach(function(e,r){clearTimeout(e.timeoutId);var o=T(t,a,"m",w).call(t,i);n.set(r,{timeoutId:T(t,a,"m",y).call(t,r,o,i)})})}),clearInterval(T(this,l,"f")),j(this,l,window.setInterval(function(){return T(t,a,"m",b).call(t,T(t,s,"f").lastActive)},1e3*T(this,f,"f").beat),"f")},e.default=E},124:(t,e,n)=>{var i=n(325);t.exports=function(){return i.Date.now()}},128:(t,e,n)=>{var i=n(800),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},129:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=void 0;var r=i(n(95)),o=n(224);Object.defineProperty(e,"DEFAULT_CONFIG",{enumerable:!0,get:function(){return o.DEFAULT_CONFIG}}),e.default=r.default},221:(t,e,n)=>{var i=n(805),r=n(124),o=n(374),a=Math.max,u=Math.min;t.exports=function(t,e,n){var s,f,c,l,v,d,h=0,p=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=s,i=f;return s=f=void 0,h=e,l=t.apply(i,n)}function w(t){var n=t-d;return void 0===d||n>=e||n<0||m&&t-h>=c}function g(){var t=r();if(w(t))return j(t);v=setTimeout(g,function(t){var n=e-(t-d);return m?u(n,c-(t-h)):n}(t))}function j(t){return v=void 0,y&&s?b(t):(s=f=void 0,l)}function T(){var t=r(),n=w(t);if(s=arguments,f=this,d=t,n){if(void 0===v)return function(t){return h=t,v=setTimeout(g,e),p?b(t):l}(d);if(m)return clearTimeout(v),v=setTimeout(g,e),b(d)}return void 0===v&&(v=setTimeout(g,e)),l}return e=o(e)||0,i(n)&&(p=!!n.leading,c=(m="maxWait"in n)?a(o(n.maxWait)||0,e):c,y="trailing"in n?!!n.trailing:y),T.cancel=function(){void 0!==v&&clearTimeout(v),h=0,s=d=f=v=void 0},T.flush=function(){return void 0===v?l:j(r())},T}},224:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=void 0,e.DEFAULT_CONFIG={events:["mousedown","mousemove","mouseup","scroll","touchstart","touchmove","touchend","keydown","keypress","change","orientationchange","resize","visibilitychange"],beat:5,debounce:500}},325:(t,e,n)=>{var i=n(840),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},374:(t,e,n)=>{var i=n(128),r=n(805),o=n(394),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=u.test(t);return n||s.test(t)?f(t.slice(2),n?2:8):a.test(t)?NaN:+t}},394:(t,e,n)=>{var i=n(552),r=n(346);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},552:(t,e,n)=>{var i=n(873),r=n(659),o=n(350),a=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):o(t)}},659:(t,e,n)=>{var i=n(873),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,u=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,u),n=t[u];try{t[u]=void 0;var i=!0}catch(t){}var r=a.call(t);return i&&(e?t[u]=n:delete t[u]),r}},800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},840:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},873:(t,e,n)=>{var i=n(325).Symbol;t.exports=i}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(129)})());
//# sourceMappingURL=index.js.map